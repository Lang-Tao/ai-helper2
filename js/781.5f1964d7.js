"use strict";(self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[]).push([[781],{31781:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{attrs:{shadow:"never"}},[r("h2",[e._v("项目设置")]),r("el-form",{attrs:{model:e.project,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}})],1),r("el-form-item",{attrs:{label:"项目地址",prop:"address"}},[r("el-input",{attrs:{placeholder:"请输入项目地址",disabled:""},model:{value:e.project.address,callback:function(t){e.$set(e.project,"address",t)},expression:"project.address"}},[r("template",{slot:"prepend"},[e._v("https://ai-helper/p/")])],2),r("el-alert",{staticStyle:{"line-height":"normal"},attrs:{title:"注意：修改项目地址将导致项目的访问 URL（包含 Git 仓库的 URL）改变，在此之前的 URL 地址将失效。",type:"warning","show-icon":"",closable:!1}})],1),r("el-form-item",{staticStyle:{"font-size":"16px","font-weight":"bold",color:"black"},attrs:{label:"项目描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",resize:"none",rows:"4",placeholder:"100字以内项目描述（选填）"},model:{value:e.project.description,callback:function(t){e.$set(e.project,"description",t)},expression:"project.description"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("更新")])],1)],1)],1)],1)},n=[],a=r(31052),s=r(27673),l={props:{address:{type:String,required:!0}},data(){return{project:{},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],address:[{required:!0,message:"请输入项目标识",trigger:"blur"}]}}},methods:{handleSubmit(){console.log("更新:",this.project),(0,s.vr)(this.project).then((e=>{console.log(e),0===e.code?(0,a.Message)({message:"更新成功",type:"success",duration:2e3}):(0,a.Message)({message:"更新失败",type:"error",duration:2e3})}))},getProjectByAddress(e){(0,s.An)(e).then((t=>{console.log("地址"+e+"获取到项目："),console.log(t),0===t.code&&(this.project=t.data)}))}},created(){this.project=this.getProjectByAddress(this.address)}},i=l,c=r(81656),d=(0,c.A)(i,o,n,!1,null,"4bdd13d6",null),u=d.exports},27673:function(e,t,r){r.d(t,{An:function(){return s},RX:function(){return c},WV:function(){return i},gA:function(){return a},vr:function(){return l},wD:function(){return n},xx:function(){return d}});var o=r(35720);function n(){return(0,o.A)({url:"/project",method:"GET",headers:{Authorization:localStorage.getItem("token")}})}function a(e){return(0,o.A)({url:"/project",method:"POST",data:e,headers:{Authorization:localStorage.getItem("token")}})}function s(e){return(0,o.A)({url:`/project/address?address=${e}`,method:"GET",headers:{Authorization:localStorage.getItem("token")}})}function l(e){return(0,o.A)({url:"/project",method:"PUT",data:e,headers:{Authorization:localStorage.getItem("token")}})}function i(e){return(0,o.A)({url:`/gitea/listpath?repo=${e}`,method:"GET",headers:{Authorization:localStorage.getItem("token")}})}function c(e,t){return(0,o.A)({url:`/gitea/getfile?path=${e}&address=${t}`,method:"GET",headers:{Authorization:localStorage.getItem("token")}})}function d(e){return(0,o.A)({url:`/project?address=${e}`,method:"DELETE",headers:{Authorization:localStorage.getItem("token")}})}}}]);
//# sourceMappingURL=781.5f1964d7.js.map