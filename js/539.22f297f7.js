"use strict";(self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[]).push([[539],{539:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{margin:"0"}},[s("div",{staticClass:"info-box"},[s("div",{staticClass:"functions"},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}},t._l(t.branchList,(function(e){return s("el-option",{key:e.value,attrs:{value:e.value}},[s("i",{staticClass:"iconfont icon-code-branch",staticStyle:{"margin-right":"10px"}}),s("span",[t._v(t._s(e.value))])])})),1)],1),t._m(0)]),s("div",{staticClass:"repository"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.files,"show-header":!1}},[s("el-table-column",{attrs:{label:""},scopedSlots:t._u([{key:"default",fn:function(e){return["dir"===e.row.type?s("el-icon",{staticClass:"el-icon-folder"},[s("i",{staticClass:"el-icon-folder"})]):t._e(),"file"===e.row.type?s("el-icon",{staticClass:"el-icon-document"},[s("i",{staticClass:"el-icon-document"})]):t._e(),"dir"===e.row.type?s("span",{staticClass:"file-name",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.openFolder(e.row.name)}}},[t._v(t._s(e.row.name))]):t._e(),"file"===e.row.type?s("span",{staticClass:"file-name",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.editFile(e.row.name)}}},[t._v(t._s(e.row.name))]):t._e()]}}])})],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info"},[a("div",{staticClass:"avator-container"},[a("img",{staticClass:"avator",attrs:{src:s(8190)}})]),a("div",{staticClass:"info-text"},[a("span",{staticClass:"title"},[t._v("repository.commitMes")]),a("span",{staticClass:"description"},[t._v("admin 提交于 time 前")])])])}],n=(s(4114),{data(){return{files:[],path:"",repository:{},branchList:[{value:"Master"},{value:"main"}],branch:"Master"}},computed:{pathArray(){return this.path.split("/").filter((t=>t))},canGoBack(){return this.pathArray.length>0}},methods:{async fetchRepoContents(){try{console.log("click file:"+this.path);const t=await fetch(`https://api.github.com/repos/lilishop/lilishop/contents/${this.path}`);let e=await t.json();this.files=this.sortFiles(e)}catch(t){console.error("Failed to fetch repository contents:",t)}},sortFiles(t){return t.sort(((t,e)=>t.type===e.type?t.name.localeCompare(e.name):"dir"===t.type?-1:1))},openFolder(t){this.path+=`${t}/`,this.fetchRepoContents()},goBack(){this.canGoBack&&(this.pathArray.pop(),this.path=this.pathArray.join("/")+"/",this.fetchRepoContents())},editFile(t){this.$router.push({name:"code-editor",params:{filePath:this.path+t}})}},mounted(){this.fetchRepoContents()}}),o=n,r=s(1656),l=(0,r.A)(o,a,i,!1,null,"1839d82e",null),c=l.exports},8190:function(t,e,s){t.exports=s.p+"img/defaultAvater.9258f0a6.jpg"}}]);
//# sourceMappingURL=539.22f297f7.js.map