"use strict";(self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[]).push([[930],{62627:function(t,e,n){n.d(e,{A:function(){return d}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{margin:"10px 20px"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.projetArray},on:{"cell-click":t.handleCellClick}},[n("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"840"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"name-cell",on:{click:function(n){return t.handleCellClick(e.row,e.column)}}},[t._v(" "+t._s(e.row.name)+" ")])]}}])}),n("el-table-column",{attrs:{label:"功能模块",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",width:"150px"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"智能问答",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px"},attrs:{icon:"iconfont icon-zhinengwenda"},on:{click:function(n){return t.handleIconClick("QnA",e.row,n)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"代码仓库",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px"},attrs:{icon:"iconfont icon-daimacangku"},on:{click:function(n){return t.handleIconClick("Repository",e.row,n)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"知识管理",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px"},attrs:{icon:"iconfont icon-zhishiku"},on:{click:function(n){return t.handleIconClick("Knowledge",e.row,n)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"项目总结",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px"},attrs:{icon:"iconfont icon-xiangmuzongjie"},on:{click:function(n){return t.handleIconClick("Summary",e.row,n)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"项目设置",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px","font-size":"16px"},attrs:{icon:"el-icon-setting"},on:{click:function(n){return t.handleIconClick("Setting",e.row,n)}}})],1)],1)]}}])}),n("el-table-column",{attrs:{prop:"admin",label:"管理员",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.admin,placement:"top"}},[n("el-avatar",{attrs:{src:e.row.avatar||t.defaultAvatar,size:"small"}})],1)]}}])}),n("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{trigger:"click"},on:{command:function(n){return t.handleCommand(n,e.row)}},nativeOn:{click:function(t){t.stopPropagation()}}},[n("el-button",{staticClass:"el-dropdown-link",staticStyle:{"margin-left":"-8px"},attrs:{size:"mini",icon:"el-icon-more",round:""}}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.row.isFavorite?n("el-dropdown-item",{attrs:{command:"cancelChangYong",row:e.row,icon:"iconfont icon-shuqian"}},[t._v("取消常用项目")]):n("el-dropdown-item",{attrs:{command:"setChangYong",row:e.row,icon:"el-icon-collection-tag"}},[t._v("设为常用项目")]),n("el-dropdown-item",{staticStyle:{color:"red"},attrs:{command:"delete",row:e.row,icon:"el-icon-delete"}},[t._v("删除项目")])],1)],1)]}}])})],1)],1)},i=[],a=(n(44114),n(27673)),r={name:"ProjectList",props:{projetArray:{type:Array,required:!0}},data(){return{defaultAvatar:"https://helperbucket.oss-cn-hangzhou.aliyuncs.com/6fd835c3-4660-44a1-925d-f962d32cbadc.png"}},methods:{handleCellClick(t,e,n,o){"name"===e.property&&(this.$router.push({name:"ProjectDetails",params:{address:t.address,title:t.name}}),console.log("Name column clicked:",t))},handleIconClick(t,e,n){n.stopPropagation(),console.log("Icon clicked:",t,e),this.$router.push({name:`project${t}`,params:{address:e.address,title:e.name}})},handleCommand(t,e){console.log("Command clicked:",t,e),"delete"===t?this.handleDelete(e):"setChangYong"===t?this.$emit("add-to-favorites",e):"cancelChangYong"===t&&this.$emit("remove-from-favorites",e)},handleDelete(t){console.log("handleDelete clicked",t),this.projetArray=this.projetArray.filter((e=>e.address!==t.address)),(0,a.xx)(t.address).then((t=>{console.log(t),0===t.code?this.$message.success("删除成功"):this.$message.error("删除失败")}))}}},c=r,l=n(81656),s=(0,l.A)(c,o,i,!1,null,"c0a27b58",null),d=s.exports},99930:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start",margin:"20px 5px 0"}},[n("span",{staticClass:"title"},[t._v("常用项目")]),0===t.favoriteProjects.length?n("el-card",{staticClass:"noProjects",attrs:{shadow:"never"}},[n("span",{staticStyle:{"font-size":"14px",color:"#657694"}},[t._v("暂无常用项目设置")])]):n("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"flex-start","align-items":"flex-start",width:"100%"}},t._l(t.favoriteProjects,(function(e,o){return n("el-card",{key:o,staticClass:"project-item",attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-header-span",staticStyle:{"font-size":"14px",color:"#657694","line-height":"24px"},on:{click:function(n){return t.handleIconClick("Repository",e,n)}}},[t._v(" "+t._s(e.name.length>8?e.name.substring(0,8)+"...":e.name)+" ")]),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{icon:"iconfont icon-shuqian",type:"text"},on:{click:function(n){return t.removeFromFavorites(e)}}})],1),n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",width:"150px",margin:"-7px 0 0 -12px"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"智能问答",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px"},attrs:{icon:"iconfont icon-zhinengwenda"},on:{click:function(n){return t.handleIconClick("QnA",e,n)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"代码仓库",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px"},attrs:{icon:"iconfont icon-daimacangku"},on:{click:function(n){return t.handleIconClick("Repository",e,n)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"知识管理",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px"},attrs:{icon:"iconfont icon-zhishiku"},on:{click:function(n){return t.handleIconClick("Knowledge",e,n)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"项目总结",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px"},attrs:{icon:"iconfont icon-xiangmuzongjie"},on:{click:function(n){return t.handleIconClick("Summary",e,n)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"项目设置",placement:"top","open-delay":500}},[n("el-button",{staticStyle:{padding:"0","min-width":"32px","min-height":"32px","font-size":"16px"},attrs:{icon:"el-icon-setting"},on:{click:function(n){return t.handleIconClick("Setting",e,n)}}})],1)],1)])})),1)],1),t.involvedProjectList.length>0?n("ProjectList",{attrs:{projetArray:t.involvedProjectList},on:{"add-to-favorites":t.addToFavorites,"remove-from-favorites":t.removeFromFavorites}}):n("el-empty",{attrs:{description:"暂无项目"}})],1)},i=[],a=(n(44114),n(62627)),r=n(27673),c={name:"",components:{ProjectList:a.A},data(){return{involvedProjectList:[],favoriteProjects:[]}},methods:{addToFavorites(t){this.favoriteProjects.includes(t)||(t.isFavorite=!0,(0,r.vr)(t).then((e=>{console.log(e),console.log(t),0===e.code?(this.$message.success("添加成功"),this.favoriteProjects.push(t)):this.$message.error("添加失败")})))},removeFromFavorites(t){this.favoriteProjects.includes(t)&&(t.isFavorite=!1,(0,r.vr)(t).then((e=>{console.log(e),console.log(t),0===e.code?(this.$message.success("移除成功"),this.favoriteProjects.splice(this.favoriteProjects.indexOf(t))):this.$message.error("移除失败")})))},handleIconClick(t,e,n){n.stopPropagation(),console.log("Icon clicked:",t,e),this.$router.push({name:`project${t}`,params:{address:e.address,title:e.name}})},getProjectList(){(0,r.wD)().then((t=>{this.involvedProjectList=t.data;for(const e of this.involvedProjectList)e.isFavorite&&this.favoriteProjects.push(e)}))}},mounted(){this.getProjectList()}},l=c,s=n(81656),d=(0,s.A)(l,o,i,!1,null,"1cbd1d70",null),p=d.exports},27673:function(t,e,n){n.d(e,{An:function(){return r},RX:function(){return s},WV:function(){return l},gA:function(){return a},vr:function(){return c},wD:function(){return i},xx:function(){return d}});var o=n(35720);function i(){return(0,o.A)({url:"/project",method:"GET",headers:{Authorization:localStorage.getItem("token")}})}function a(t){return(0,o.A)({url:"/project",method:"POST",data:t,headers:{Authorization:localStorage.getItem("token")}})}function r(t){return(0,o.A)({url:`/project/address?address=${t}`,method:"GET",headers:{Authorization:localStorage.getItem("token")}})}function c(t){return(0,o.A)({url:"/project",method:"PUT",data:t,headers:{Authorization:localStorage.getItem("token")}})}function l(t){return(0,o.A)({url:`/gitea/listpath?repo=${t}`,method:"GET",headers:{Authorization:localStorage.getItem("token")}})}function s(t,e){return(0,o.A)({url:`/gitea/getfile?path=${t}&address=${e}`,method:"GET",headers:{Authorization:localStorage.getItem("token")}})}function d(t){return(0,o.A)({url:`/project?address=${t}`,method:"DELETE",headers:{Authorization:localStorage.getItem("token")}})}}}]);
//# sourceMappingURL=930.d55158c1.js.map