{"version":3,"file":"js/781.5f1964d7.js","mappings":"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","sources":["webpack://my-app/./src/components/projectDetails/Setting.vue?8a8e","webpack://my-app/src/components/projectDetails/Setting.vue","webpack://my-app/./src/components/projectDetails/Setting.vue?ee77","webpack://my-app/./src/components/projectDetails/Setting.vue","webpack://my-app/./src/api/project.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('h2',[_vm._v(\"项目设置\")]),_c('el-form',{attrs:{\"model\":_vm.project,\"label-width\":\"120px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"项目名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目名称\"},model:{value:(_vm.project.name),callback:function ($$v) {_vm.$set(_vm.project, \"name\", $$v)},expression:\"project.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"项目地址\",\"prop\":\"address\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目地址\",\"disabled\":\"\"},model:{value:(_vm.project.address),callback:function ($$v) {_vm.$set(_vm.project, \"address\", $$v)},expression:\"project.address\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"https://ai-helper/p/\")])],2),_c('el-alert',{staticStyle:{\"line-height\":\"normal\"},attrs:{\"title\":\"注意：修改项目地址将导致项目的访问 URL（包含 Git 仓库的 URL）改变，在此之前的 URL 地址将失效。\",\"type\":\"warning\",\"show-icon\":\"\",\"closable\":false}})],1),_c('el-form-item',{staticStyle:{\"font-size\":\"16px\",\"font-weight\":\"bold\",\"color\":\"black\"},attrs:{\"label\":\"项目描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"resize\":\"none\",\"rows\":\"4\",\"placeholder\":\"100字以内项目描述（选填）\"},model:{value:(_vm.project.description),callback:function ($$v) {_vm.$set(_vm.project, \"description\", $$v)},expression:\"project.description\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"更新\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n  <el-card shadow=\"never\" >\r\n    <h2>项目设置</h2>\r\n    \r\n    <el-form :model=\"project\" label-width=\"120px\" :rules=\"rules\">\r\n\r\n\r\n        <!-- 项目名称 -->\r\n      <el-form-item label=\"项目名称\" prop=\"name\">\r\n        <el-input v-model=\"project.name\" placeholder=\"请输入项目名称\"></el-input>\r\n      </el-form-item>\r\n\r\n\r\n      <!-- 项目地址 -->\r\n      <el-form-item label=\"项目地址\" prop=\"address\">\r\n        <el-input v-model=\"project.address\" placeholder=\"请输入项目地址\" disabled>\r\n          <template slot=\"prepend\">https://ai-helper/p/</template>\r\n        </el-input>\r\n        <el-alert \r\n          title=\"注意：修改项目地址将导致项目的访问 URL（包含 Git 仓库的 URL）改变，在此之前的 URL 地址将失效。\"\r\n          type=\"warning\" \r\n          show-icon \r\n          :closable=\"false\"\r\n          style=\"line-height:normal;\"\r\n        />\r\n\r\n      </el-form-item>\r\n\r\n    \r\n      <!-- 项目描述 -->\r\n       <el-form-item label=\"项目描述\" prop=\"description\"  style=\"font-size: 16px; font-weight: bold; color:black\">\r\n            <el-input type=\"textarea\" resize=\"none\" rows=\"4\" placeholder=\"100字以内项目描述（选填）\" v-model=\"project.description\"></el-input>\r\n          </el-form-item>\r\n\r\n      <!-- 项目时间 -->\r\n      <!-- <el-form-item label=\"项目时间\">\r\n        <el-date-picker\r\n          v-model=\"project.startDate\"\r\n          type=\"date\"\r\n          placeholder=\"开始时间\">\r\n        </el-date-picker>\r\n        <span> ~ </span>\r\n        <el-date-picker\r\n          v-model=\"project.endDate\"\r\n          type=\"date\"\r\n          placeholder=\"完成时间\">\r\n        </el-date-picker>\r\n      </el-form-item> -->\r\n\r\n      <!-- 操作按钮 -->\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"handleSubmit\">更新</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Message } from \"element-ui\";\r\nimport { getProjectInfo, updateProject } from \"@/api/project\";\r\n\r\nexport default {\r\n  props: {\r\n    address: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      project: {},\r\n      rules: {\r\n        name: [{ required: true, message: \"请输入项目名称\", trigger: \"blur\" }],\r\n        address: [\r\n          { required: true, message: \"请输入项目标识\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    handleSubmit() {\r\n      console.log(\"更新:\", this.project);\r\n\r\n      updateProject(this.project).then((res) => {\r\n        console.log(res);\r\n\r\n        if (res.code === 0) {\r\n          Message({\r\n            message: \"更新成功\",\r\n            type: \"success\",\r\n            duration: 2000,\r\n          });\r\n        } else {\r\n          Message({\r\n            message: \"更新失败\",\r\n            type: \"error\",\r\n            duration: 2000,\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    //  根据项目地址获取项目信息\r\n    getProjectByAddress(address) {\r\n      getProjectInfo(address).then((res) => {\r\n        console.log(\"地址\" + address + \"获取到项目：\");\r\n        console.log(res);\r\n\r\n        if (res.code === 0) {\r\n          this.project = res.data;\r\n        }\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.project = this.getProjectByAddress(this.address);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nh2 {\r\n  margin-bottom: 30px;\r\n  margin-left: 20px;\r\n}\r\n.el-card {\r\n  width: 60%;\r\n  border: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Setting.vue?vue&type=template&id=4bdd13d6&scoped=true\"\nimport script from \"./Setting.vue?vue&type=script&lang=js\"\nexport * from \"./Setting.vue?vue&type=script&lang=js\"\nimport style0 from \"./Setting.vue?vue&type=style&index=0&id=4bdd13d6&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bdd13d6\",\n  null\n  \n)\n\nexport default component.exports","import request from \"@/utils/request\";\r\n\r\n// 获取项目列表\r\nexport function getProjectList() {\r\n  return request({\r\n    url: \"/project\",\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\")\r\n    }\r\n  });\r\n}\r\n\r\n// 创建项目\r\nexport function createProject(data) {\r\n  return request({\r\n    url: \"/project\",\r\n    method: \"POST\",\r\n    data:data,\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\")\r\n    }\r\n  });\r\n}\r\n\r\n// 根据项目地址获取项目信息\r\nexport function getProjectInfo(address) {\r\n  return request({\r\n    url: `/project/address?address=${address}`,\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\")\r\n    }\r\n  });\r\n}\r\n\r\n// 更新项目信息\r\nexport function updateProject(data) {\r\n  return request({\r\n    url: \"/project\",\r\n    method: \"PUT\",\r\n    data:data,\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\")\r\n    }\r\n  });\r\n}\r\n\r\n// 获取项目文件名\r\nexport function getProjectFileList(repo) {\r\n  return request({\r\n    url: `/gitea/listpath?repo=${repo}`,\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\")\r\n    }\r\n  });\r\n}\r\n\r\n// 根据 文件路径 和 仓库地址 获取文件\r\nexport function getProjectFileContent(path, address) {\r\n  return request({\r\n    url: `/gitea/getfile?path=${path}&address=${address}`,\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\")\r\n    }\r\n  })\r\n}\r\n\r\n//删除项目\r\nexport function deleteProject(address) {\r\n  return request({\r\n    url: `/project?address=${address}`,\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\")\r\n    }\r\n  })\r\n}"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","project","rules","model","value","callback","$$v","$set","expression","slot","staticStyle","on","handleSubmit","staticRenderFns","props","address","type","String","required","data","name","message","trigger","methods","console","log","updateProject","then","res","code","Message","duration","getProjectByAddress","getProjectInfo","created","component","getProjectList","request","url","method","headers","Authorization","localStorage","getItem","createProject","getProjectFileList","repo","getProjectFileContent","path","deleteProject"],"sourceRoot":""}