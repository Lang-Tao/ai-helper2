"use strict";(self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[]).push([[676],{79676:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[s("el-card",{staticStyle:{width:"50%","margin-top":"50px"}},[s("el-form",{staticStyle:{"padding-right":"20px"},attrs:{model:e.user,"label-width":"80px"}},[s("div",{staticStyle:{margin:"15px","text-align":"center"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://121.43.48.182:8081/api/upload",headers:{token:e.user.token},"show-file-list":!1,"on-success":e.handleUploadSuccess,"before-upload":e.beforeAvatarUpload}},[e.user.avatar?s("img",{staticClass:"avatar",attrs:{src:e.user.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{attrs:{placeholder:"姓名"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),s("el-form-item",{attrs:{label:"电话",prop:"phone"}},[s("el-input",{attrs:{placeholder:"电话"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),s("el-form-item",{attrs:{label:"地址",prop:"address"}},[s("el-input",{attrs:{type:"textarea",placeholder:"地址"},model:{value:e.user.address,callback:function(t){e.$set(e.user,"address",t)},expression:"user.address"}})],1),s("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保 存")])],1)],1)],1)],1)},r=[],l=s(17585),o={name:"Person",data(){return{}},mounted(){this.user=this.$store.state.user},methods:{beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&s},handleUploadSuccess(e){if(0===e.code){console.log(e);const t=e.data;(0,l.xG)(t).then((()=>{this.$message.success("头像更新成功"),this.$store.state.user.avatar=t})).catch((()=>{this.$message.error("头像更新失败")}))}else this.$message.error("头像上传失败")},update(){(0,l.TK)(this.user).then((e=>{console.log(e),0===e.code?this.$message.success("用户信息更新成功"):this.$message.error("用户信息更新失败")})).catch((e=>{this.$message.error("请求失败: "+e.message)}))}},computed:{user:{get(){return this.$store.state.user},set(e){this.$store.commit("updateUser",e)}}}},i=o,n=s(81656),u=(0,n.A)(i,a,r,!1,null,"70ccd20a",null),c=u.exports}}]);
//# sourceMappingURL=676.5a88df5f.js.map